@page
@model QLMH.Pages.Admin.Products.IndexModel

@{
    ViewData["Title"] = "Quản lý Sản phẩm";
}

<h1>Quản lý Sản phẩm</h1>

<p>
    <a asp-page="Create" class="btn btn-primary">
        <i class="fas fa-plus"></i> Thêm sản phẩm mới
    </a>
</p>

<div class="card mb-4">
    <div class="card-header">
        <i class="fas fa-table me-1"></i>
        Danh sách sản phẩm
    </div>
    <div class="card-body">
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th style="width: 100px; text-align: center;">Hình ảnh</th>

                    <th>
                        @Html.DisplayNameFor(model => model.Product[0].Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Product[0].Category)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Product[0].Price)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Product[0].SalePrice)
                    </th>
                    <th style="width: 120px; text-align: center;">
                        @Html.DisplayNameFor(model => model.Product[0].StockQuantity)
                    </th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Product)
                {
                    <tr>
                        <td class="text-center align-middle">
                            @if (!string.IsNullOrEmpty(item.ImageUrl))
                            {
                                <img src="@item.ImageUrl" alt="@item.Name"
                                     style="width: 70px; height: 70px; object-fit: cover; border-radius: 5px; border: 1px solid #dee2e6;" />
                            }
                            else
                            {
                                <span class="text-muted small">Không có ảnh</span>
                            }
                        </td>

                        <td class="align-middle">
                            @Html.DisplayFor(modelItem => item.Name)
                        </td>
                        <td class="align-middle">
                            @Html.DisplayFor(modelItem => item.Category.Name)
                        </td>
                        <td class="align-middle">
                            @Html.DisplayFor(modelItem => item.Price)
                        </td>
                        <td class="align-middle">
                            @if (item.SalePrice != null)
                            {
                                <span class="text-danger">@Html.DisplayFor(modelItem => item.SalePrice)</span>
                            }
                            else
                            {
                                <span>-</span>
                            }
                        </td>
                        <td class="align-middle text-center">
                            @if (item.StockQuantity > 0)
                            {
                                <span class="badge bg-success" style="font-size: 0.9em;">@item.StockQuantity</span>
                            }
                            else
                            {
                                <span class="badge bg-danger">Hết hàng</span>
                            }
                        </td>
                        <td class="align-middle">
                            <div class="btn-group" role="group">
                                <a asp-page="./Edit" asp-route-id="@item.Id" class="btn btn-warning btn-sm text-white" title="Sửa">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a asp-page="./Details" asp-route-id="@item.Id" class="btn btn-info btn-sm text-white" title="Chi tiết">
                                    <i class="fas fa-info-circle"></i>
                                </a>
                                <a asp-page="./Delete" asp-route-id="@item.Id" class="btn btn-danger btn-sm" title="Xóa">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>